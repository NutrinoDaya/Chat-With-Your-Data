@use '../styles/variables' as *;

.chat-container { display:flex; flex-direction:column; height:100%; max-width:1100px; margin:0 auto; padding:1.25rem 1.25rem 1.5rem; background:linear-gradient(145deg,$color-surface 0%,$color-surface-alt 100%); border:1px solid $color-border; border-radius:$radius-lg; box-shadow:$shadow-md; position:relative; overflow:hidden; }

.messages-container { flex:1; overflow-y:auto; padding:0.75rem 0.5rem 0.5rem; display:flex; flex-direction:column; gap:0.85rem; scrollbar-gutter:stable; }

.input-form { display:flex; gap:0.75rem; padding:0.9rem 0.75rem 0.4rem; margin-top:0.25rem; border-top:1px solid $color-border; background:linear-gradient(90deg,rgba(255,255,255,0.02),rgba(255,255,255,0)); backdrop-filter:blur(6px); position:sticky; bottom:0; }

.chat-input { flex:1; padding:0.85rem 1rem; background:$color-bg-alt; color:$color-text; border:1px solid $color-border; border-radius:$radius-md; font-size:0.95rem; line-height:1.4; resize:none; max-height:220px; transition: border-color $transition-base, background-color $transition-base; font-family:inherit; &:focus { outline:none; border-color:$color-primary; box-shadow:$shadow-focus; } &::placeholder { color:$color-text-dim; } }

.send-button { padding:0.85rem 1.25rem; background:linear-gradient(135deg,$color-primary 0%,$color-primary-accent 90%); color:#fff; border:none; font-size:0.9rem; font-weight:600; border-radius:$radius-md; cursor:pointer; display:inline-flex; align-items:center; gap:0.5rem; line-height:1; transition:filter $transition-base, transform $transition-base; box-shadow:0 3px 10px -2px rgba(59,130,246,.45); &:hover { filter:brightness(1.07); } &:active { transform:translateY(1px) scale(.98); } &:disabled { opacity:.6; cursor:not-allowed; } }

.message-item { display:flex; gap:0.9rem; padding:0.65rem 0.85rem; border-radius:$radius-md; background:$color-bg-alt; border:1px solid $color-border; position:relative; }
.message-item.user { background:linear-gradient(135deg,$color-primary 0%,$color-primary-accent 90%); color:#fff; border:none; }
.message-role { font-weight:600; font-size:0.7rem; letter-spacing:.08em; text-transform:uppercase; color:$color-text-dim; width:72px; flex-shrink:0; }
.message-item.user .message-role { color:rgba(255,255,255,.85); }
.message-content { white-space:pre-wrap; line-height:1.45; font-size:0.9rem; font-family:inherit; color:$color-text; }
.message-item.user .message-content { color:#fff; }
.message-content[data-streaming] { position:relative; }
.message-content[data-streaming]::after { content:''; width:6px; height:1em; background:linear-gradient(180deg,$color-primary 0%,$color-primary-accent 100%); display:inline-block; margin-left:2px; border-radius:2px; animation: caretBlink 1s steps(2,start) infinite; vertical-align:bottom; }
@keyframes caretBlink { 0%,49% {opacity:1;} 50%,100% {opacity:0;} }
.message-actions { opacity:0; position:absolute; top:6px; right:6px; display:flex; gap:4px; }
.message-item:hover .message-actions { opacity:1; }
.icon-btn { background:rgba(255,255,255,0.06); border:1px solid $color-border; width:26px; height:26px; display:grid; place-items:center; border-radius:$radius-sm; cursor:pointer; color:$color-text-dim; transition:all $transition-base; }
.icon-btn:hover { background:$color-surface-alt; color:$color-primary-accent; }

.typing-indicator { display:flex; gap:5px; padding:0.4rem 0.9rem 0.5rem; }
.typing-indicator span { width:6px; height:6px; background:$color-text-dim; border-radius:50%; animation: blink 1.1s infinite ease-in-out; }
.typing-indicator span:nth-child(2){ animation-delay:.25s; }
.typing-indicator span:nth-child(3){ animation-delay:.5s; }
@keyframes blink { 0%,80%,100% {opacity:.2;} 40% {opacity:1;} }

// Chart and table styles
.chart-container {
  margin: 1rem 0;
  padding: 1.25rem;
  background: rgba(255, 255, 255, 0.02);
  border-radius: $radius-md;
  border: 1px solid $color-border;
  box-shadow: $shadow-sm;
}

.chart-image {
  display: block;
  margin: 0 auto;
  max-width: 100%;
  height: auto;
  border-radius: $radius-sm;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.table-container {
  margin: 1rem 0;
  overflow-x: auto;
  background: rgba(255, 255, 255, 0.02);
  border-radius: $radius-md;
  border: 1px solid $color-border;
  box-shadow: $shadow-sm;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
  
  th {
    background: linear-gradient(135deg, #374151, #4B5563);
    color: #F9FAFB;
    font-weight: 600;
    padding: 0.85rem;
    text-align: left;
    border-bottom: 2px solid $color-border;
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    
    &:first-child {
      border-top-left-radius: $radius-sm;
    }
    
    &:last-child {
      border-top-right-radius: $radius-sm;
      border-right: none;
    }
  }
  
  td {
    padding: 0.85rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    border-right: 1px solid rgba(255, 255, 255, 0.05);
    color: $color-text;
    background: rgba(255, 255, 255, 0.01);
    
    &:last-child {
      border-right: none;
    }
  }
  
  tbody tr:hover {
    background: rgba(255, 255, 255, 0.06);
  }
  
  tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.02);
  }
  
  tbody tr:nth-child(even):hover {
    background: rgba(255, 255, 255, 0.08);
  }
}

.sql-details {
  margin-top: 0.75rem;
  
  summary {
    cursor: pointer;
    color: $color-text-dim;
    font-size: 0.8rem;
    font-weight: 500;
    padding: 0.5rem;
    border-radius: $radius-sm;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid $color-border;
    
    &:hover {
      color: $color-primary-accent;
      background: rgba(255, 255, 255, 0.05);
    }
  }
}

.sql-code {
  background: $color-bg-alt;
  color: $color-text;
  padding: 1rem;
  border-radius: $radius-sm;
  margin-top: 0.5rem;
  font-family: 'Courier New', monospace;
  font-size: 0.8rem;
  line-height: 1.4;
  overflow-x: auto;
  border: 1px solid $color-border;
}
